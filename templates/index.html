<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="refresh" content="60" />
        <title>Ekky Armandi | UpWork RSS Feed</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
        <style>
            text {
                font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            }
            #tags {
                color: #969696;
                background-color: #f2f2f2;
                font-size: 14;
            }
            #tags:hover {
                background-color: #c9c9c9;
            }
            a {
                text-decoration: none;
                color: black;
            }
            a:hover {
                color: #14a800;
            }
            span.card {
                color: #14a800;
                border-color: #14a800;
            }
        </style>
    </head>
    <body style="background-color: whitesmoke" onload="">
        <div class="container mt-5 rounded-3 border" style="width: 800px; background-color: white">
            <div class="row">
                <h1 class="col-4 m-4 align-self-end" style="color: #14a800">My Job Feed</h1>
                <div class="col row align-self-center me-4">
                    <span class="card col p-2 mt-3 mx-2 text-center">
                        <h5>
                            <strike>Total Earnings </strike>
                            <!-- <p class="mb-0" style="font-size: 12">(since Aug 2021)</p> -->
                        </h5>
                        <p class="mb-1 fw-bold" style="font-size: 24">XXX</p>
                    </span>
                    <span class="card col p-2 mt-3 mx-2 text-center">
                        <h5><strike>Current Balance</strike></h5>
                        <p class="mb-1 fw-bold" style="font-size: 24">XXX</p>
                    </span>
                </div>
            </div>
            {% for model in models %}
            <hr />
            <div class="mx-4">
                <h5 class="text mb-0"><a target="_blank" href="{{model.link}}">{{model.title}}</a></h5>
                <p class="text mb-3 fw-semibold" style="font-size: medium; color: #14a800">{{model.category}}</p>
                <p class="mb-1" style="font-size: 14px; color: gray">
                    <span class="fw-semibold">{{model.budget}}</span> -
                    <span class="timestamp" timestamp="{{model.timestamp}}">{{model.timestr}}</span>
                </p>
                <p class="text-justify">{{model.description}}</p>
                {% for tag in model.tags %}
                <div class="text py-1 px-2 my-1 rounded-pill d-inline-block" id="tags">{{tag}}</div>
                {% endfor %}
                <p class="text-end my-2"><i class="fa-solid fa-location-dot me-2" style="color: #b7b7b7"></i>{{model.country}}</p>
            </div>
            {% endfor %}
        </div>
    </body>
    <script>
        function countTime() {
            // define time to str function
            function time2str(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.round((seconds % 3600) / 60);
                if (hours == 0.0) {
                    return minutes + "m ago";
                } else {
                    return hours + "h " + minutes + "m ago";
                }
            }
            // define current timestamp
            const now = new Date().getTime() / 1e3;

            // get all tag with timestamp class name
            const spans = document.getElementsByClassName("timestamp");
            for (let i = 0; i < spans.length; i++) {
                const timestamp = spans[i].getAttribute("timestamp");
                const gap = new Date(now - timestamp);
                spans[i].innerHTML = time2str(gap);
            }
        }
        setInterval(countTime, 60 * 1e3);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</html>
